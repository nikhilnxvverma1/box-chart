<div class="generic-block"
[style.left.px]="node.geometry.getBoundingBox().x"
[style.top.px]="node.geometry.getBoundingBox().y"
[style.width.px]="node.geometry.getBoundingBox().width"
[style.height.px]="node.geometry.getBoundingBox().height"
[@selection]="node.selected?'selected':'unselected'" 
(mousedown)="registerDragIntention()"
(dblclick)="editContent($event)">
	<!-- Background based on type of generic shape (Refer GenericDiagramNodeType in worksheet.ts)-->
	<svg width="100%" height="100%" class="node-background" >
		<!--Rectangle(1)-->
		<rect *ngIf="node.shapeType==1" x="0" y="0" width="100%" height="100%" [style.fill]="node.background.hashCode()" [style.stroke]="strokeColor()" [style.stroke-width]="3"/>
		<!--Circle(2) or Ellipse(4)-->
		<ellipse *ngIf="node.shapeType==2||node.shapeType==4" cx="50%" cy="50%" rx="50%" ry="50%" [style.fill]="node.background.hashCode()" [style.stroke]="strokeColor()" [style.stroke-width]="3"/>
		<!--Rounded Rectangle(5)-->
		<rect *ngIf="node.shapeType==5" width="100%" height="100%" rx="20px" ry="20px" [style.fill]="node.background.hashCode()" [style.stroke]="strokeColor()" [style.stroke-width]="3"/>
		<!--Parallelogram(8)-->
		<!--TODO buggy:gets clipped by bounds, needs trignometry fix-->
		<rect *ngIf="node.shapeType==8" x="0" y="0" width="100%" height="100%" transform="skewX(-20)" [style.fill]="node.background.hashCode()" [style.stroke]="strokeColor()" [style.stroke-width]="3"/>
	</svg>
	<div class="node-content" [style.color]="node.foreground.hashCode()" >{{node.content}}</div>
</div>

<!-- 8 Reize handlers with different placement can be placed outside (absolute positioned)-->
<!-- TODO possible through loop but angular 2 doesn't provide general counter loops-->
<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="1" 
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="2"  
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="3"  
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="4"  
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="5"  
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="6"  
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="7" 
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<resize-handle [rect]="node.geometry.getBoundingBox()" [placement]="8"  
*ngIf="soloSelected" 
(requestDragging)="registerDragIntention($event)" 
(updateAllResizeHandlers)="updateAllResizeHandlers($event)">
</resize-handle>

<div 
	*ngIf="soloSelected" 
	class="medium-bubble remove-operation"
	(mousedown)="removeMe.emit(node)"
	[style.left.px]="node.geometry.getBoundingBox().topRight().offset(10,0).x"
	[style.top.px]="node.geometry.getBoundingBox().topRight().offset(0,-10).y"
	><!--TODO try to externalize offset values (10)-->

</div>

<!--[workspace]="workspace"-->
<!-- Gizmo Edge associated with this Node-->
<gizmo-edge 
	*ngIf="soloSelected" 
	[fromNode]="node"
	[positionOfTheCursor]="workspace.cursorPosition"
	[prepared]="prepared"
	[ghostNode]="ghostNode"
	(linkNodes)="linkNodes.emit($event)"
>
</gizmo-edge>